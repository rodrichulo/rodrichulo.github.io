<!doctype html>
<html>
<head>
    <script>

    function printData(flatJson) {
        flatJson = flatJson[0];
        var word = "<b> Word </b>: " + flatJson.word;

        var p = "<b>Pronounciations: </b>";
        flatJson.phonetics.forEach((phoneticURL) => {
            if (('text' in phoneticURL) && (phoneticURL.text != "")) {
                p += phoneticURL.text + " <br>"
            }
        });

        var m = "";
        flatJson.meanings.forEach((meaning) => {
            m += "<b>" + meaning.partOfSpeech + "</b>: ";
            meaning.definitions.forEach((definition) => {
                m += definition.definition + "<br>"
            });
            m += "<br>";
        });

        var urls = "<b>Definitions: </b>";
        flatJson.sourceUrls.forEach((source) => {
            urls += "Source: <a href=\"" + source + "\"> Dictionary Link </a><br>";
        });

        document.getElementById("Text").innerHTML = 
            word + " <br> " + p + "<br>" + m + "<br>" + urls + "<br>"
            + "This API returns a dictionary entry for a given word (in this case Hello) <br>"
            + "I found it on Github <br> I Used the Fetch option and entered the word hello for the request"
            + "This would be useful for a book app if you wanted to highlight unusual words and show the entry when the user hovers";
    }
    async function fetchText() {
        const response = await fetch('https://api.dictionaryapi.dev/api/v2/entries/en/hello');
        if (!response.ok) {
            const message = `An error has occured: ${response.status}`;
            throw new Error(message);
        }

        const data = await response.json();
        return data;
    }
    fetchText().catch(error => {
        error.message;
    });

    fetchText().then(data => {
        printData(data);
    });

    fetchText();
    </script>
	<title>Dictionary API w/Fetch</title>
	<meta charset="utf-8"/>
    <body>
        <h1>Word Definition API </h1>
        <div id="Text"></div>
    </body>
	

</head>